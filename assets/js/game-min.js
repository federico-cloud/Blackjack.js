(()=>{"use strict";let e=[];const t=["C","D","H","S"],i=["A","J","Q","K"];let a=0,l=[];const s=document.querySelector("#btn-draw"),d=document.querySelector("#btn-stop"),r=document.querySelector("#btn-new"),n=document.querySelectorAll("small"),o=document.querySelectorAll(".divCards"),g=()=>{e=[];for(let i=2;i<=10;i++)for(let a of t)e.push(i+a);for(let a of t)for(let t of i)e.push(t+a);return _.shuffle(e)},c=()=>{if(0===e.length)throw"No more cards in deck";return e.pop()},m=e=>{const t=e.substring(0,e.length-1);return isNaN(t)?"A"===t?11:10:1*t},h=(e,t)=>(l[t]=l[t]+m(e),n[t].innerText=l[t],l[t]),u=(e,t)=>{const i=document.createElement("img");i.classList.add("card"),i.src=`assets/cards/${e}.png`,o[t].append(i)},f=e=>{do{const e=c();a=h(e,l.length-1),u(e,l.length-1)}while(a<e&&e<=21);if(a>e&&a<=21||l[0]>21)Swal.fire({title:"YOU LOOSE",text:"=(",imageUrl:"assets/img/sad.jpg",imageWidth:400,imageHeight:400,imageAlt:"Looser Image"}),d.disabled=!0,s.disabled=!0;else if(a>21&&e>a||a>21)Swal.fire({title:"YOU ARE THE WINNER",text:"You defeat the CPU, Congratulations.",imageUrl:"assets/img/michi.jpg",imageWidth:400,imageHeight:400,imageAlt:"Winner Image"}),d.disabled=!0;else if(a===e){const e=c();a+=m(e),u(e,l.length-1),a>21?(Swal.fire({title:"YOU ARE THE WINNER",text:"You defeat the CPU, Congratulations.",imageUrl:"assets/img/michi.jpg",imageWidth:400,imageHeight:400,imageAlt:"Winner Image"}),s.disabled=!0,d.disabled=!0):(Swal.fire({title:"YOU LOOSE",text:"=(",imageUrl:"assets/img/sad.jpg",imageWidth:400,imageHeight:400,imageAlt:"Looser Image"}),s.disabled=!0,d.disabled=!0),n[l.length-1].innerText=a}};s.addEventListener("click",()=>{const e=c();l[0]=h(e,0),u(e,0),l[0]>21&&(s.disabled=!0,d.disabled=!0,f(l[0]))}),d.addEventListener("click",()=>{s.disabled=!0,f(l[0])}),r.addEventListener("click",()=>{((t=2)=>{e=g(),l=[];for(let e=0;e<t;e++)l.push(0);s.disabled=!1,d.disabled=!1,n.forEach(e=>e.innerText=0),o.forEach(e=>e.innerHTML=" ")})()})})();